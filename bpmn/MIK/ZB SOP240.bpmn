<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1xv5sx1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.2.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.0.0">
  <bpmn:collaboration id="SOP240_">
    <bpmn:participant id="Participant_0bqr0eh" name="MIK DEF OPERATOR" processRef="SOP240" />
    <bpmn:textAnnotation id="TextAnnotation_1tufces">
      <bpmn:text>Collect COI_ID before launching generic SOP</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0hwdm34" sourceRef="Participant_0bqr0eh" targetRef="TextAnnotation_1tufces" />
  </bpmn:collaboration>
  <bpmn:process id="SOP240" name="ProcessSOP240" isExecutable="true">
    <bpmn:startEvent id="Start_SOP240" name="SOP240">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=uuid" target="processId" />
          <zeebe:output source="=msgDate" target="StartEvent" />
          <zeebe:output source="=entityId" target="entityId" />
          <zeebe:output source="=entityDefinitionName" target="entityDefinitionName" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1wovffs</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1er8v7r" messageRef="Message_0dsoqr0" />
    </bpmn:startEvent>
    <bpmn:sendTask id="SendMessageLaunch241" name="Launch 241">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="SendMessage" retries="1" />
        <zeebe:taskHeaders>
          <zeebe:header key="Message" value="start/topic/SOP241" />
        </zeebe:taskHeaders>
        <zeebe:ioMapping>
          <zeebe:input source="={&#34;msgDate&#34;:StartEvent,&#34;uuid&#34;:processId,&#34;COI_ID&#34;:COI_ID,&#34;ABNLCaseId&#34;:ABNLCaseId,&#34;entityId&#34;:entityId,&#34;entityDefinitionName&#34;:entityDefinitionName}" target="info" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18l3a16</bpmn:incoming>
      <bpmn:outgoing>Flow_03v6vx4</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="Event_Stop241">
      <bpmn:incoming>Flow_03v6vx4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="FormEnterABNLCase" name="Enter ABNL Case">
      <bpmn:extensionElements>
        <zeebe:taskHeaders>
          <zeebe:header key="assemblyCode" value="SOP240RegisterABNLCase" />
          <zeebe:header key="procedureId" value="ABNL" />
        </zeebe:taskHeaders>
        <zeebe:ioMapping>
          <zeebe:output source="=COI_ID" target="COI_ID" />
          <zeebe:output source="=ABNLCaseId" target="ABNLCaseId" />
        </zeebe:ioMapping>
        <zeebe:formDefinition formKey="SOP240RegisterABNLCase" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1wovffs</bpmn:incoming>
      <bpmn:outgoing>Flow_18l3a16</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_18l3a16" sourceRef="FormEnterABNLCase" targetRef="SendMessageLaunch241" />
    <bpmn:sequenceFlow id="Flow_1wovffs" sourceRef="Start_SOP240" targetRef="FormEnterABNLCase" />
    <bpmn:sequenceFlow id="Flow_03v6vx4" sourceRef="SendMessageLaunch241" targetRef="Event_Stop241" />
    <bpmn:textAnnotation id="TextAnnotation_145sq1r">
      <bpmn:text>EntityId already passed because this happens from within started incident</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_18sgm16" sourceRef="Start_SOP240" targetRef="TextAnnotation_145sq1r" />
  </bpmn:process>
  <bpmn:message id="Message_0dsoqr0" name="start/topic/SOP240" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="SOP240_">
      <bpmndi:BPMNShape id="Participant_0bqr0eh_di" bpmnElement="Participant_0bqr0eh" isHorizontal="true">
        <dc:Bounds x="129" y="210" width="801" height="290" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_03v6vx4_di" bpmnElement="Flow_03v6vx4">
        <di:waypoint x="710" y="320" />
        <di:waypoint x="822" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wovffs_di" bpmnElement="Flow_1wovffs">
        <di:waypoint x="248" y="320" />
        <di:waypoint x="380" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18l3a16_di" bpmnElement="Flow_18l3a16">
        <di:waypoint x="480" y="320" />
        <di:waypoint x="610" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_05dhnzg_di" bpmnElement="Start_SOP240" bioc:stroke="#43a047" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#43a047">
        <dc:Bounds x="212" y="302" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="209" y="345" width="42" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0mz16of_di" bpmnElement="SendMessageLaunch241">
        <dc:Bounds x="610" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_18cn2u6_di" bpmnElement="Event_Stop241" bioc:stroke="#e53935" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#e53935">
        <dc:Bounds x="822" y="302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12fkjw9_di" bpmnElement="FormEnterABNLCase">
        <dc:Bounds x="380" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_145sq1r_di" bpmnElement="TextAnnotation_145sq1r">
        <dc:Bounds x="230" y="400" width="160" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_18sgm16_di" bpmnElement="Association_18sgm16">
        <di:waypoint x="238" y="336" />
        <di:waypoint x="272" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_1tufces_di" bpmnElement="TextAnnotation_1tufces">
        <dc:Bounds x="450" y="80" width="100" height="70" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_0hwdm34_di" bpmnElement="Association_0hwdm34">
        <di:waypoint x="514" y="210" />
        <di:waypoint x="507" y="150" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>